<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) on Sat Jan 18 01:36:30 PST 2025 -->
<title>TrcGridDrive</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2025-01-18">
<meta name="description" content="declaration: package: trclib.pathdrive, class: TrcGridDrive">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
<script type="text/javascript" src="../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">trclib.pathdrive</a></div>
<h1 title="Class TrcGridDrive" class="title">Class TrcGridDrive</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">trclib.pathdrive.TrcGridDrive</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">TrcGridDrive</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">This class implements the auto-assist grid drive. It allows the driver to use the DPad to quickly navigate the
 field maze in grid cell units in a square pattern accurately without the risk of running into obstacles at grid
 cell intersections. This algorithm assumes we have accurate odometry. If we don't, all bets are off.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>private final <a href="../robotcore/TrcEvent.html" title="class in trclib.robotcore">TrcEvent</a></code></div>
<div class="col-second even-row-color"><code><a href="#callbackEvent" class="member-name-link">callbackEvent</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private final <a href="../drivebase/TrcDriveBase.html" title="class in trclib.drivebase">TrcDriveBase</a></code></div>
<div class="col-second odd-row-color"><code><a href="#driveBase" class="member-name-link">driveBase</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private final double</code></div>
<div class="col-second even-row-color"><code><a href="#gridCellSize" class="member-name-link">gridCellSize</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a>&lt;<a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a>&gt;</code></div>
<div class="col-second odd-row-color"><code><a href="#gridDriveQueue" class="member-name-link">gridDriveQueue</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private final <a href="../robotcore/TrcTaskMgr.TaskObject.html" title="class in trclib.robotcore">TrcTaskMgr.TaskObject</a></code></div>
<div class="col-second even-row-color"><code><a href="#gridDriveTaskObj" class="member-name-link">gridDriveTaskObj</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#moduleName" class="member-name-link">moduleName</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private final <a href="TrcPurePursuitDrive.html" title="class in trclib.pathdrive">TrcPurePursuitDrive</a></code></div>
<div class="col-second even-row-color"><code><a href="#purePursuitDrive" class="member-name-link">purePursuitDrive</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>final <a href="../robotcore/TrcDbgTrace.html" title="class in trclib.robotcore">TrcDbgTrace</a></code></div>
<div class="col-second odd-row-color"><code><a href="#tracer" class="member-name-link">tracer</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>private final double</code></div>
<div class="col-second even-row-color"><code><a href="#turnEndAdj" class="member-name-link">turnEndAdj</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private final double</code></div>
<div class="col-second odd-row-color"><code><a href="#turnStartAdj" class="member-name-link">turnStartAdj</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(trclib.drivebase.TrcDriveBase,trclib.pathdrive.TrcPurePursuitDrive,double)" class="member-name-link">TrcGridDrive</a><wbr>(<a href="../drivebase/TrcDriveBase.html" title="class in trclib.drivebase">TrcDriveBase</a>&nbsp;driveBase,
 <a href="TrcPurePursuitDrive.html" title="class in trclib.pathdrive">TrcPurePursuitDrive</a>&nbsp;purePursuitDrive,
 double&nbsp;gridCellSize)</code></div>
<div class="col-last even-row-color">
<div class="block">Constructor: Creates an instance of the object.</div>
</div>
<div class="col-constructor-name odd-row-color"><code><a href="#%3Cinit%3E(trclib.drivebase.TrcDriveBase,trclib.pathdrive.TrcPurePursuitDrive,double,double,double)" class="member-name-link">TrcGridDrive</a><wbr>(<a href="../drivebase/TrcDriveBase.html" title="class in trclib.drivebase">TrcDriveBase</a>&nbsp;driveBase,
 <a href="TrcPurePursuitDrive.html" title="class in trclib.pathdrive">TrcPurePursuitDrive</a>&nbsp;purePursuitDrive,
 double&nbsp;gridCellSize,
 double&nbsp;turnStartAdj,
 double&nbsp;turnEndAdj)</code></div>
<div class="col-last odd-row-color">
<div class="block">Constructor: Creates an instance of the object.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#adjustGridCellCenter(trclib.pathdrive.TrcPose2D)" class="member-name-link">adjustGridCellCenter</a><wbr>(<a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a>&nbsp;gridCell)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This method takes a grid cell position that may not be at the center of the cell and adjusts it to the center
 of the grid cell it's on.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private double</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#adjustGridCellHeading(double)" class="member-name-link">adjustGridCellHeading</a><wbr>(double&nbsp;heading)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This method adjusts the heading to the nearest 90-degree multiple.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#adjustPoseToGridCellCenter(trclib.pathdrive.TrcPose2D)" class="member-name-link">adjustPoseToGridCellCenter</a><wbr>(<a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a>&nbsp;pose)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This method adjusts the given pose to the nearest grid cell center pose.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private double</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#adjustToGridCellCenter(double)" class="member-name-link">adjustToGridCellCenter</a><wbr>(double&nbsp;gridCellPos)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This method adjusts the grid cell position to the grid cell center.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#cancel()" class="member-name-link">cancel</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This method cancels Grid Drive if one is in progress.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#driveDone(java.lang.Object)" class="member-name-link">driveDone</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;context)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This method is called when the PurePursuitDrive operation is done.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#driveToEndPoint(trclib.pathdrive.TrcPose2D)" class="member-name-link">driveToEndPoint</a><wbr>(<a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a>&nbsp;endPoint)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This method generate a path from the current robot pose to the endpoint that snaps to the grid so it moves
 only in square pattern, never diagonal.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private <a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getIntermediateGridCell(trclib.pathdrive.TrcPose2D,trclib.pathdrive.TrcPose2D)" class="member-name-link">getIntermediateGridCell</a><wbr>(<a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a>&nbsp;startCell,
 <a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a>&nbsp;endCell)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This method returns an intermediate grid cell so that travelling from the start cell to the end cell will
 go through the intermediate cell such that the robot will only travel in the direction of north/south and
 east/west but not diagonally and will be centering itself in the grid cells.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#gridCellToPose(trclib.pathdrive.TrcPose2D)" class="member-name-link">gridCellToPose</a><wbr>(<a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a>&nbsp;gridCell)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This method translates a grid cell pose to a real world pose.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#gridDriveTask(trclib.robotcore.TrcTaskMgr.TaskType,trclib.robotcore.TrcRobot.RunMode,boolean)" class="member-name-link">gridDriveTask</a><wbr>(<a href="../robotcore/TrcTaskMgr.TaskType.html" title="enum class in trclib.robotcore">TrcTaskMgr.TaskType</a>&nbsp;taskType,
 <a href="../robotcore/TrcRobot.RunMode.html" title="enum class in trclib.robotcore">TrcRobot.RunMode</a>&nbsp;runMode,
 boolean&nbsp;slowPeriodicLoop)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This method is called periodically to process the drive queue.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isGridDriveActive()" class="member-name-link">isGridDriveActive</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This method checks if Grid Drive is currently in progress.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#poseToGridCell(trclib.pathdrive.TrcPose2D)" class="member-name-link">poseToGridCell</a><wbr>(<a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a>&nbsp;pose)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This method translates a real world pose to a grid cell pose.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#resetGridCellCenter()" class="member-name-link">resetGridCellCenter</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This method resets the drive base odometry to the nearest grid cell center.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setRelativeGridTarget(int,int)" class="member-name-link">setRelativeGridTarget</a><wbr>(int&nbsp;xGridCells,
 int&nbsp;yGridCells)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This method adds a movement segment to the drive queue.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setRelativeXGridTarget(int)" class="member-name-link">setRelativeXGridTarget</a><wbr>(int&nbsp;gridCells)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This method adds an X movement segment to the drive queue.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setRelativeYGridTarget(int)" class="member-name-link">setRelativeYGridTarget</a><wbr>(int&nbsp;gridCells)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This method adds an Y movement segment to the drive queue.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setTaskEnabled(boolean)" class="member-name-link">setTaskEnabled</a><wbr>(boolean&nbsp;enabled)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This method enables/disables the Grid Drive task.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#startGridDrive()" class="member-name-link">startGridDrive</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This method processes the gridDriveQueue to build a path for PurePursuitDrive to follow.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#willTurn(trclib.pathdrive.TrcPose2D,trclib.pathdrive.TrcPose2D)" class="member-name-link">willTurn</a><wbr>(<a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a>&nbsp;prevSegment,
 <a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a>&nbsp;nextSegment)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This method determines if the next segment has a compatible heading with the previous segment.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="moduleName">
<h3>moduleName</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">moduleName</span></div>
</section>
</li>
<li>
<section class="detail" id="tracer">
<h3>tracer</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="../robotcore/TrcDbgTrace.html" title="class in trclib.robotcore">TrcDbgTrace</a></span>&nbsp;<span class="element-name">tracer</span></div>
</section>
</li>
<li>
<section class="detail" id="driveBase">
<h3>driveBase</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="../drivebase/TrcDriveBase.html" title="class in trclib.drivebase">TrcDriveBase</a></span>&nbsp;<span class="element-name">driveBase</span></div>
</section>
</li>
<li>
<section class="detail" id="purePursuitDrive">
<h3>purePursuitDrive</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="TrcPurePursuitDrive.html" title="class in trclib.pathdrive">TrcPurePursuitDrive</a></span>&nbsp;<span class="element-name">purePursuitDrive</span></div>
</section>
</li>
<li>
<section class="detail" id="gridCellSize">
<h3>gridCellSize</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">gridCellSize</span></div>
</section>
</li>
<li>
<section class="detail" id="turnStartAdj">
<h3>turnStartAdj</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">turnStartAdj</span></div>
</section>
</li>
<li>
<section class="detail" id="turnEndAdj">
<h3>turnEndAdj</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">turnEndAdj</span></div>
</section>
</li>
<li>
<section class="detail" id="gridDriveTaskObj">
<h3>gridDriveTaskObj</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="../robotcore/TrcTaskMgr.TaskObject.html" title="class in trclib.robotcore">TrcTaskMgr.TaskObject</a></span>&nbsp;<span class="element-name">gridDriveTaskObj</span></div>
</section>
</li>
<li>
<section class="detail" id="callbackEvent">
<h3>callbackEvent</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="../robotcore/TrcEvent.html" title="class in trclib.robotcore">TrcEvent</a></span>&nbsp;<span class="element-name">callbackEvent</span></div>
</section>
</li>
<li>
<section class="detail" id="gridDriveQueue">
<h3>gridDriveQueue</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a>&lt;<a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a>&gt;</span>&nbsp;<span class="element-name">gridDriveQueue</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(trclib.drivebase.TrcDriveBase,trclib.pathdrive.TrcPurePursuitDrive,double,double,double)">
<h3>TrcGridDrive</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">TrcGridDrive</span><wbr><span class="parameters">(<a href="../drivebase/TrcDriveBase.html" title="class in trclib.drivebase">TrcDriveBase</a>&nbsp;driveBase,
 <a href="TrcPurePursuitDrive.html" title="class in trclib.pathdrive">TrcPurePursuitDrive</a>&nbsp;purePursuitDrive,
 double&nbsp;gridCellSize,
 double&nbsp;turnStartAdj,
 double&nbsp;turnEndAdj)</span></div>
<div class="block">Constructor: Creates an instance of the object.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>driveBase</code> - specifies the drive base object.</dd>
<dd><code>purePursuitDrive</code> - specifies the pure pursuit drive object.</dd>
<dd><code>gridCellSize</code> - specifies the grid cell size in inches.</dd>
<dd><code>turnStartAdj</code> - specifies the distance adjustment for the previous segment endpoint before the turn.</dd>
<dd><code>turnEndAdj</code> - specifies the distance adjustment for the next segment startpoint after the turn.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(trclib.drivebase.TrcDriveBase,trclib.pathdrive.TrcPurePursuitDrive,double)">
<h3>TrcGridDrive</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">TrcGridDrive</span><wbr><span class="parameters">(<a href="../drivebase/TrcDriveBase.html" title="class in trclib.drivebase">TrcDriveBase</a>&nbsp;driveBase,
 <a href="TrcPurePursuitDrive.html" title="class in trclib.pathdrive">TrcPurePursuitDrive</a>&nbsp;purePursuitDrive,
 double&nbsp;gridCellSize)</span></div>
<div class="block">Constructor: Creates an instance of the object.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>driveBase</code> - specifies the drive base object.</dd>
<dd><code>purePursuitDrive</code> - specifies the pure pursuit drive object.</dd>
<dd><code>gridCellSize</code> - specifies the grid cell size in inches.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="cancel()">
<h3>cancel</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">cancel</span>()</div>
<div class="block">This method cancels Grid Drive if one is in progress.</div>
</section>
</li>
<li>
<section class="detail" id="isGridDriveActive()">
<h3>isGridDriveActive</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isGridDriveActive</span>()</div>
<div class="block">This method checks if Grid Drive is currently in progress.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if Grid Drive is active, false otherwise.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setTaskEnabled(boolean)">
<h3>setTaskEnabled</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setTaskEnabled</span><wbr><span class="parameters">(boolean&nbsp;enabled)</span></div>
<div class="block">This method enables/disables the Grid Drive task.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>enabled</code> - specifies true to enable Grid Drive task, false to disable.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="adjustToGridCellCenter(double)">
<h3>adjustToGridCellCenter</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">adjustToGridCellCenter</span><wbr><span class="parameters">(double&nbsp;gridCellPos)</span></div>
<div class="block">This method adjusts the grid cell position to the grid cell center.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>gridCellPos</code> - specifies the position in grid cell units.</dd>
<dt>Returns:</dt>
<dd>adjusted position in grid cell units.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="adjustGridCellHeading(double)">
<h3>adjustGridCellHeading</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">adjustGridCellHeading</span><wbr><span class="parameters">(double&nbsp;heading)</span></div>
<div class="block">This method adjusts the heading to the nearest 90-degree multiple.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>heading</code> - specifies the heading to be adjusted to the nearest 90-degree multiple.</dd>
<dt>Returns:</dt>
<dd>adjusted heading in the range of [0.0, 360.0)</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="poseToGridCell(trclib.pathdrive.TrcPose2D)">
<h3>poseToGridCell</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a></span>&nbsp;<span class="element-name">poseToGridCell</span><wbr><span class="parameters">(<a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a>&nbsp;pose)</span></div>
<div class="block">This method translates a real world pose to a grid cell pose.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>pose</code> - specifies the pose in real world units.</dd>
<dt>Returns:</dt>
<dd>pose in the grid cell units.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="gridCellToPose(trclib.pathdrive.TrcPose2D)">
<h3>gridCellToPose</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a></span>&nbsp;<span class="element-name">gridCellToPose</span><wbr><span class="parameters">(<a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a>&nbsp;gridCell)</span></div>
<div class="block">This method translates a grid cell pose to a real world pose.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>gridCell</code> - specifies the grid cell pose in grid cell units.</dd>
<dt>Returns:</dt>
<dd>pose in real world units.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="adjustGridCellCenter(trclib.pathdrive.TrcPose2D)">
<h3>adjustGridCellCenter</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a></span>&nbsp;<span class="element-name">adjustGridCellCenter</span><wbr><span class="parameters">(<a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a>&nbsp;gridCell)</span></div>
<div class="block">This method takes a grid cell position that may not be at the center of the cell and adjusts it to the center
 of the grid cell it's on.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>gridCell</code> - specifies the grid cell to adjust in the unit of cells.</dd>
<dt>Returns:</dt>
<dd>adjusted gridCell in the unit of cells.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="adjustPoseToGridCellCenter(trclib.pathdrive.TrcPose2D)">
<h3>adjustPoseToGridCellCenter</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a></span>&nbsp;<span class="element-name">adjustPoseToGridCellCenter</span><wbr><span class="parameters">(<a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a>&nbsp;pose)</span></div>
<div class="block">This method adjusts the given pose to the nearest grid cell center pose.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>pose</code> - specifies the pose in real world units to be adjusted.</dd>
<dt>Returns:</dt>
<dd>adjusted pose in real world units.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="resetGridCellCenter()">
<h3>resetGridCellCenter</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">resetGridCellCenter</span>()</div>
<div class="block">This method resets the drive base odometry to the nearest grid cell center. Odometry may get inaccurate for
 various reasons such as odometry wheel slippage, sensor drifting etc. This situation can be corrected by
 manually driving the robot to the center of a grid cell and call this method. It assumes the drift is within
 the current grid cell. Therefore, it resets the odometry back to the nearest grid cell center.</div>
</section>
</li>
<li>
<section class="detail" id="getIntermediateGridCell(trclib.pathdrive.TrcPose2D,trclib.pathdrive.TrcPose2D)">
<h3>getIntermediateGridCell</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a></span>&nbsp;<span class="element-name">getIntermediateGridCell</span><wbr><span class="parameters">(<a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a>&nbsp;startCell,
 <a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a>&nbsp;endCell)</span></div>
<div class="block">This method returns an intermediate grid cell so that travelling from the start cell to the end cell will
 go through the intermediate cell such that the robot will only travel in the direction of north/south and
 east/west but not diagonally and will be centering itself in the grid cells.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>startCell</code> - specifies the start cell.</dd>
<dd><code>endCell</code> - specifies the end cell.</dd>
<dt>Returns:</dt>
<dd>intermediate cell if one is needed, null if end cell is already inline with the start cell.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setRelativeGridTarget(int,int)">
<h3>setRelativeGridTarget</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setRelativeGridTarget</span><wbr><span class="parameters">(int&nbsp;xGridCells,
 int&nbsp;yGridCells)</span></div>
<div class="block">This method adds a movement segment to the drive queue. Note: it is expected that only one argument will be
 non-zero and the other one must be zero.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>xGridCells</code> - specifies the X movement in number of grid cells, positive for East, negative for West.</dd>
<dd><code>yGridCells</code> - specifies the Y movement in number of grid cells, positive for North, negative for South.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setRelativeXGridTarget(int)">
<h3>setRelativeXGridTarget</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setRelativeXGridTarget</span><wbr><span class="parameters">(int&nbsp;gridCells)</span></div>
<div class="block">This method adds an X movement segment to the drive queue.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>gridCells</code> - specifies the X movement in number of grid cells, positive for East, negative for West.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setRelativeYGridTarget(int)">
<h3>setRelativeYGridTarget</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setRelativeYGridTarget</span><wbr><span class="parameters">(int&nbsp;gridCells)</span></div>
<div class="block">This method adds an Y movement segment to the drive queue.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>gridCells</code> - specifies the Y movement in number of grid cells, positive for North, negative for South.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="driveToEndPoint(trclib.pathdrive.TrcPose2D)">
<h3>driveToEndPoint</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">driveToEndPoint</span><wbr><span class="parameters">(<a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a>&nbsp;endPoint)</span></div>
<div class="block">This method generate a path from the current robot pose to the endpoint that snaps to the grid so it moves
 only in square pattern, never diagonal.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>endPoint</code> - specifies the endpoint in real world units.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="gridDriveTask(trclib.robotcore.TrcTaskMgr.TaskType,trclib.robotcore.TrcRobot.RunMode,boolean)">
<h3>gridDriveTask</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">gridDriveTask</span><wbr><span class="parameters">(<a href="../robotcore/TrcTaskMgr.TaskType.html" title="enum class in trclib.robotcore">TrcTaskMgr.TaskType</a>&nbsp;taskType,
 <a href="../robotcore/TrcRobot.RunMode.html" title="enum class in trclib.robotcore">TrcRobot.RunMode</a>&nbsp;runMode,
 boolean&nbsp;slowPeriodicLoop)</span></div>
<div class="block">This method is called periodically to process the drive queue.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>taskType</code> - specifies the type of task being run. This may be useful for handling multiple task types.</dd>
<dd><code>runMode</code> - specifies the current competition mode (e.g. Autonomous, TeleOp, Test).</dd>
<dd><code>slowPeriodicLoop</code> - specifies true if it is running the slow periodic loop on the main robot thread,
        false otherwise.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="startGridDrive()">
<h3>startGridDrive</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">startGridDrive</span>()</div>
<div class="block">This method processes the gridDriveQueue to build a path for PurePursuitDrive to follow.</div>
</section>
</li>
<li>
<section class="detail" id="driveDone(java.lang.Object)">
<h3>driveDone</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">driveDone</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;context)</span></div>
<div class="block">This method is called when the PurePursuitDrive operation is done. It releases the ownership of the drive base.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - not used.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="willTurn(trclib.pathdrive.TrcPose2D,trclib.pathdrive.TrcPose2D)">
<h3>willTurn</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">willTurn</span><wbr><span class="parameters">(<a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a>&nbsp;prevSegment,
 <a href="TrcPose2D.html" title="class in trclib.pathdrive">TrcPose2D</a>&nbsp;nextSegment)</span></div>
<div class="block">This method determines if the next segment has a compatible heading with the previous segment. If not, the robot
 will turn.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>prevSegment</code> - specifies the previous segment position.</dd>
<dd><code>nextSegment</code> - specifies the next segment position.</dd>
<dt>Returns:</dt>
<dd>true if the robot will turn from the previous segment to the next segment, false otherwise.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
